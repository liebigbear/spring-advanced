# Spring Advanced ν”„λ΅μ νΈ
JWT κΈ°λ°μ λ³΄μ• μ‹μ¤ν…, AOPλ¥Ό ν™μ©ν• λ΅κΉ…, μ»¤μ¤ν…€ μΈν„°μ…‰ν„°λ¥Ό μ΄μ©ν• μΈκ°€ μ²λ¦¬, Jacocoλ¥Ό ν†µν• ν…μ¤νΈ μ»¤λ²„λ¦¬μ§€ μΈ΅μ •


## π€ μ£Όμ” κΈ°λ¥

*   **μΈμ¦ λ° μΈκ°€**: JWT(JSON Web Token)μ™€ Bcryptλ¥Ό μ‚¬μ©ν• ν† ν° κΈ°λ° μΈμ¦ λ° κ΄€λ¦¬μ κ¶ν• μΈκ°€ μ‹μ¤ν…μ„ κµ¬ν„ν–μµλ‹λ‹¤.
*   **API λ΅κΉ…**: Spring AOPλ¥Ό ν™μ©ν•μ—¬ νΉμ • Admin APIμ μ”μ²­ λ° μ‘λ‹µ λ³Έλ¬Έμ„ μ‹¤ν–‰ μ „ν›„λ΅ μλ™ λ΅κΉ…ν•©λ‹λ‹¤.
*   **λ³΄μ• ν•„ν„°λ§**: `Filter`μ™€ `Interceptor`λ¥Ό ν™μ©ν•μ—¬ μ—­ν• (μΈμ¦/μΈκ°€)μ„ λ¶„λ¦¬ν•κ³ , Swagger UI λ“± νΉμ • κ²½λ΅λ” λ³΄μ• κ²€μ‚¬μ—μ„ μ μ™Έν•©λ‹λ‹¤.
*   **API λ¬Έμ„ μλ™ν™”**: SpringDoc OpenAPIλ¥Ό μ‚¬μ©ν•μ—¬ API λ…μ„Έλ¥Ό μλ™μΌλ΅ μƒμ„±ν•κ³ , Swagger UIλ¥Ό ν†µν•΄ ν…μ¤νΈν•  μ μμµλ‹λ‹¤.

## π› οΈ κΈ°μ  μ¤νƒ λ° μμ΅΄μ„±

| κµ¬λ¶„ | κΈ°μ  |
| :--- | :--- |
| **Framework** | Spring Boot 3.3.3, Spring Data JPA, Spring Web, Spring AOP |
| **Security** | JWT (jjwt 0.11.5), Bcrypt (at.favre.lib:bcrypt:0.10.2) |
| **Database** | H2 (λ©”λ¨λ¦¬ DB), MySQL Connector |
| **API Docs** | SpringDoc OpenAPI (Swagger UI 2.6.0) |
| **Testing** | JUnit 5, Jacoco |
| **Build** | Gradle |
| **Utilities** | Lombok |

## π“– API λ¬Έμ„ ν™•μΈν•κΈ°

μ• ν”λ¦¬μΌ€μ΄μ… μ‹¤ν–‰ ν›„, μ•„λ URLμ„ ν†µν•΄ API λ¬Έμ„λ¥Ό ν™•μΈν•κ³  μ§μ ‘ ν…μ¤νΈν•΄λ³Ό μ μμµλ‹λ‹¤.

- **Swagger UI**: `http://localhost:8080/swagger-ui.html`

## π” λ³΄μ• μ‹μ¤ν… κµ¬ν„ μƒμ„Έ

μ΄ ν”„λ΅μ νΈμ λ³΄μ• μ‹μ¤ν…μ€ `Filter`μ™€ `Interceptor`μ μ—­ν• μ„ λ…ν™•ν λ¶„λ¦¬ν•μ—¬ κµ¬ν„λμ—μµλ‹λ‹¤.

1.  **μΈμ¦ (`JwtFilter`)**:
    -   κ°€μ¥ λ¨Όμ € λ¨λ“  μ”μ²­μ„ κ°€λ΅μ±„μ„ `Authorization` ν—¤λ”μ JWT μ ν¨μ„±μ„ κ²€μ‚¬ν•©λ‹λ‹¤.
    -   ν† ν°μ΄ μ ν¨ν•λ©΄, ν† ν°μ—μ„ μ¶”μ¶ν• μ‚¬μ©μ μ •λ³΄(`userId`, `userRole` λ“±)λ¥Ό `HttpServletRequest`μ μ†μ„±(Attribute)μ— λ‹΄μ•„ λ‹¤μ λ‹¨κ³„λ΅ μ „λ‹¬ν•©λ‹λ‹¤.

2.  **μΈκ°€ (`AdminAuthInterceptor`)**:
    -   `WebConfig`μ— λ“±λ΅λμ–΄ `/admin/**` κ²½λ΅μ μ”μ²­λ§ μ„ νƒμ μΌλ΅ κ°€λ΅μ±•λ‹λ‹¤.
    -   `JwtFilter`κ°€ λ‹΄μ•„μ¤€ `userRole` μ†μ„±μ„ ν™•μΈν•μ—¬, `ADMIN` μ—­ν• μ΄ μ•„λ‹ κ²½μ° `AccessDeniedException`μ„ λ°μƒμ‹μΌ μ ‘κ·Όμ„ μ°¨λ‹¨ν•©λ‹λ‹¤.

## π“ AOPλ¥Ό ν™μ©ν• λ΅κΉ…

`LoggingAspect` ν΄λμ¤λ¥Ό ν†µν•΄ νΉμ • μ»¨νΈλ΅¤λ¬μ API μ‹¤ν–‰ νλ¦„μ„ μ¶”μ ν•©λ‹λ‹¤.

-   **λ€μƒ**: `CommentAdminController`, `UserAdminController`μ λ¨λ“  λ©”μ†λ“
-   **κΈ°λ¥**: `@Around` μ–΄λ“λ°”μ΄μ¤λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ†λ“ μ‹¤ν–‰ μ „μ—λ” **μ”μ²­ λ³Έλ¬Έ(Request DTO)**μ„, μ‹¤ν–‰ ν›„μ—λ” **μ‘λ‹µ λ³Έλ¬Έ(Response DTO)**μ„ λ΅κ·Έμ— μ¶λ ¥ν•©λ‹λ‹¤. μ΄λ¥Ό ν†µν•΄ APIμ μ…μ¶λ ¥μ„ λ…ν™•ν•κ² ν™•μΈν•  μ μμµλ‹λ‹¤.

